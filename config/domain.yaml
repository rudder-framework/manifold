# Domain Clock Configuration
# ==========================
# Controls adaptive windowing across all PRISM layers
#
# Key concept: The domain's clock is set by its fastest-changing signal.
# Window size = min_cycles × (sampling_rate / domain_frequency)

defaults:
  # Window sizing
  min_cycles: 3              # Cycles of fastest signal per window
  min_samples: 20            # Hard floor (statistical validity)
  max_samples: 1000          # Hard ceiling (memory)
  stride_fraction: 0.33      # Stride = window × this fraction
  
  # Delta thresholds for convergence detection
  convergence_threshold: 0.05  # Metric stability threshold
  
  # Frequency estimation methods (all enabled by default)
  use_spectral: true
  use_autocorrelation: true
  use_zero_crossing: true
  use_activity: true
  
  # Laplace domain configuration
  laplace_n_values: 50       # Number of s-values
  laplace_freq_margin: 10    # s-values span [slowest/margin, fastest×margin]

# =============================================================================
# Domain-specific overrides
# =============================================================================
domains:
  cmapss:
    description: "NASA Turbofan (cycle-based, slow degradation)"
    min_cycles: 5            # More cycles for gradual degradation
    min_samples: 30
    max_samples: 500
    
  femto:
    description: "PRONOSTIA Bearing (high frequency vibration)"
    min_cycles: 3
    min_samples: 50          # Higher floor for vibration
    max_samples: 2000        # Allow larger windows
    
  hydraulic:
    description: "UCI Hydraulic (multi-rate sensors 1Hz-100Hz)"
    min_cycles: 3
    min_samples: 20
    stride_fraction: 0.25    # More overlap for multi-rate alignment
    
  tep:
    description: "Tennessee Eastman Process (chemical simulation)"
    min_cycles: 5
    min_samples: 30
    max_samples: 1000
    
  cwru:
    description: "Case Western Bearing (fault classification)"
    min_cycles: 3
    min_samples: 100         # Vibration needs more samples
    max_samples: 5000
    
  metropt:
    description: "MetroPT train compressor"
    min_cycles: 3
    min_samples: 20

# =============================================================================
# Delta thresholds for layer transitions
# =============================================================================
# These control when PRISM detects "meaningful change" vs noise
# Lower = more sensitive, Higher = more conservative

delta_thresholds:
  # Vector layer: metric stability
  # "Has the behavioral metric stabilized?"
  vector_convergence: 0.05   # Metric change < 5% = stable window found
  
  # Geometry layer: structural change detection
  # "Is the system's structure deforming?"
  geometry_divergence: 0.10  # Divergence shift > 10% = stress detected
  geometry_coupling: 0.15    # Coupling velocity > 15% = decoupling
  
  # Mode layer: regime detection
  # "Has the system entered a different behavioral mode?"
  mode_entropy: 0.20         # Entropy spike > 20% = regime uncertainty
  mode_affinity: 0.10        # Affinity drop > 10% = mode transition
  
  # State layer: transition detection
  # "Is the system moving through behavioral space?"
  state_velocity: 0.10       # Velocity magnitude threshold
  state_acceleration: 0.05   # Acceleration threshold (velocity of velocity)

# =============================================================================
# RUL correlation thresholds (for ML-free prognostics)
# =============================================================================
# When these correlations are achieved, direct measurement beats ML

rul_direct_thresholds:
  divergence_correlation: 0.70   # |r| > 0.70 → use divergence directly
  coupling_correlation: 0.60     # |r| > 0.60 → use coupling velocity
  entropy_correlation: 0.50      # |r| > 0.50 → use mode entropy
  
  # If all above achieved, RUL ≈ f(divergence, coupling, entropy)
  # with simple linear calibration, no ML needed

# =============================================================================
# Physics validation thresholds
# =============================================================================
physics:
  energy_conservation_tolerance: 0.05  # Allow 5% drift
  entropy_increase_tolerance: 0.01     # Allow small decreases (noise)
  causality_lag_max: 10                # Max lag for Granger causality
